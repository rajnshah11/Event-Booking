{"ast":null,"code":"import _objectSpread from \"/Users/rajshah/Desktop/Event-Booking-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/rajshah/Desktop/Event-Booking-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/rajshah/Desktop/Event-Booking-master/client/src/components/Auth/Auth.js\";\nimport React, { useState, useContext } from \"react\";\nimport \"./Auth.css\"; // Ensure you have the CSS file imported\nimport AuthContext from \"../../context/auth-context\";\nvar AuthPage = function AuthPage() {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLogin = _useState2[0],\n    setIsLogin = _useState2[1];\n  var _useState3 = useState({\n      username: \"\",\n      password: \"\",\n      confirmPassword: \"\" // Will only be used during signup\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    formState = _useState4[0],\n    setFormState = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    errorMessage = _useState6[0],\n    setErrorMessage = _useState6[1];\n  var authContext = useContext(AuthContext);\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    var username = formState.username,\n      password = formState.password,\n      confirmPassword = formState.confirmPassword; // Validation\n    if (username.trim().length === 0) {\n      setErrorMessage(\"Username is required.\");\n      return;\n    }\n    if (password.trim().length === 0) {\n      setErrorMessage(\"Password is required.\");\n      return;\n    }\n    if (!isLogin && password.length < 6) {\n      setErrorMessage(\"Password must be at least 6 characters long.\");\n      return;\n    }\n    if (!isLogin && confirmPassword !== password) {\n      setErrorMessage(\"Passwords do not match.\");\n      return;\n    }\n    var requestBody = {\n      query: \"\\n        query {\\n          login(username: \\\"\".concat(username, \"\\\", password: \\\"\").concat(password, \"\\\") {\\n                userId\\n                token\\n                tokenExpiration\\n          }\\n        }\\n      \")\n    };\n\n    // Switch to signup mutation if isLogin is false\n    if (!isLogin) {\n      requestBody = {\n        query: \"mutation {\\n          createUser(userInput: {username: \\\"\".concat(username, \"\\\", password: \\\"\").concat(password, \"\\\"}) {\\n            _id\\n            username\\n          }\\n        }\")\n      };\n    }\n    fetch(\"http://localhost:8000/graphql\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (res) {\n      if (res.status !== 200 && res.status !== 201) {\n        throw new Error(\"Failed\");\n      }\n      return res.json();\n    }).then(function (resData) {\n      if (resData.data.login.token) {\n        authContext.login(resData.data.login.token, resData.data.login.userId, resData.data.login.tokenExpiration);\n      }\n    }).catch(function (err) {\n      console.log(err);\n      setErrorMessage(\"An error occurred. Please try again.\");\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, isLogin ? 'Login' : 'Sign Up'), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Username\",\n    value: formState.username,\n    onChange: function onChange(e) {\n      return setFormState(_objectSpread({}, formState, {\n        username: e.target.value\n      }));\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Password\",\n    value: formState.password,\n    onChange: function onChange(e) {\n      return setFormState(_objectSpread({}, formState, {\n        password: e.target.value\n      }));\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }), !isLogin &&\n  /*#__PURE__*/\n  // Confirm password field only for signup\n  React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Confirm Password\",\n    value: formState.confirmPassword,\n    onChange: function onChange(e) {\n      return setFormState(_objectSpread({}, formState, {\n        confirmPassword: e.target.value\n      }));\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }), errorMessage && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error-message\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 28\n    }\n  }, errorMessage), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, isLogin ? 'Login' : 'Sign Up')), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"switch-button\",\n    onClick: function onClick() {\n      return setIsLogin(!isLogin);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, isLogin ? 'Need to create an account?' : 'Already have an account?')));\n};\nexport default AuthPage;","map":{"version":3,"names":["React","useState","useContext","AuthContext","AuthPage","_useState","_useState2","_slicedToArray","isLogin","setIsLogin","_useState3","username","password","confirmPassword","_useState4","formState","setFormState","_useState5","_useState6","errorMessage","setErrorMessage","authContext","handleSubmit","event","preventDefault","trim","length","requestBody","query","concat","fetch","method","body","JSON","stringify","headers","then","res","status","Error","json","resData","data","login","token","userId","tokenExpiration","catch","err","console","log","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","e","_objectSpread","target","required","onClick"],"sources":["/Users/rajshah/Desktop/Event-Booking-master/client/src/components/Auth/Auth.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport \"./Auth.css\";  // Ensure you have the CSS file imported\nimport AuthContext from \"../../context/auth-context\";\n\nconst AuthPage = () => {\n  const [isLogin, setIsLogin] = useState(true);\n  const [formState, setFormState] = useState({\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\", // Will only be used during signup\n  });\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const authContext = useContext(AuthContext);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const { username, password, confirmPassword } = formState;\n\n    // Validation\n    if (username.trim().length === 0) {\n      setErrorMessage(\"Username is required.\");\n      return;\n    }\n    if (password.trim().length === 0) {\n      setErrorMessage(\"Password is required.\");\n      return;\n    }\n    if (!isLogin && password.length < 6) {\n      setErrorMessage(\"Password must be at least 6 characters long.\");\n      return;\n    }\n    if (!isLogin && confirmPassword !== password) {\n      setErrorMessage(\"Passwords do not match.\");\n      return;\n    }\n\n    let requestBody = {\n      query: `\n        query {\n          login(username: \"${username}\", password: \"${password}\") {\n                userId\n                token\n                tokenExpiration\n          }\n        }\n      `,\n    };\n\n    // Switch to signup mutation if isLogin is false\n    if (!isLogin) {\n      requestBody = {\n        query: `mutation {\n          createUser(userInput: {username: \"${username}\", password: \"${password}\"}) {\n            _id\n            username\n          }\n        }`,\n      };\n    }\n\n    fetch(\"http://localhost:8000/graphql\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Failed\");\n        }\n        return res.json();\n      })\n      .then((resData) => {\n        if (resData.data.login.token) {\n          authContext.login(\n            resData.data.login.token,\n            resData.data.login.userId,\n            resData.data.login.tokenExpiration\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(\"An error occurred. Please try again.\");\n      });\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"auth-card\">\n        <h2>{isLogin ? 'Login' : 'Sign Up'}</h2>\n        <form onSubmit={handleSubmit}>\n          <input\n            type=\"text\"\n            placeholder=\"Username\"\n            value={formState.username}\n            onChange={(e) => setFormState({ ...formState, username: e.target.value })}\n            required\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            value={formState.password}\n            onChange={(e) => setFormState({ ...formState, password: e.target.value })}\n            required\n          />\n          {!isLogin && (  // Confirm password field only for signup\n            <input\n              type=\"password\"\n              placeholder=\"Confirm Password\"\n              value={formState.confirmPassword}\n              onChange={(e) => setFormState({ ...formState, confirmPassword: e.target.value })}\n              required\n            />\n          )}\n          {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\n          <button type=\"submit\">{isLogin ? 'Login' : 'Sign Up'}</button>\n        </form>\n        <button className=\"switch-button\" onClick={() => setIsLogin(!isLogin)}>\n          {isLogin ? 'Need to create an account?' : 'Already have an account?'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default AuthPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}