{"ast":null,"code":"import React,{useState,useRef}from\"react\";import\"./Auth.css\";import{useAuth}from\"../../context/auth-context\";import{useNavigate}from\"react-router-dom\";import{loginUser,signUpUser}from\"../../controller/authContoller/authController.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthPage=()=>{const[isLogin,setIsLogin]=useState(true);const[errorMessage,setErrorMessage]=useState(\"\");const emailRef=useRef();const passwordRef=useRef();const confirmPasswordRef=useRef();const authContext=useAuth();const navigate=useNavigate();const validateForm=()=>{var _confirmPasswordRef$c;const email=emailRef.current.value;const password=passwordRef.current.value;const confirmPassword=(_confirmPasswordRef$c=confirmPasswordRef.current)===null||_confirmPasswordRef$c===void 0?void 0:_confirmPasswordRef$c.value;const emailPattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/;if(!emailPattern.test(email)){return\"Please enter a valid email address.\";}if(password.length<6){return\"Password should be at least 6 characters long.\";}if(!isLogin&&password!==confirmPassword){return\"Passwords do not match.\";}return null;};const handleResponse=userData=>{if(isLogin){const{token,userId,tokenExpiration}=userData;authContext.login(token,userId,tokenExpiration);navigate(\"/events\");}else{setIsLogin(true);setErrorMessage(\"User created! Please log in.\");}};const handleSubmit=async event=>{event.preventDefault();const error=validateForm();if(error){setErrorMessage(error);return;}const email=emailRef.current.value;const password=passwordRef.current.value;try{const userData=isLogin?await loginUser(email,password):await signUpUser(email,password);handleResponse(userData);}catch(error){setErrorMessage(\"Something went wrong.\");}};const handleSwitchMode=()=>{setIsLogin(prevState=>!prevState);setErrorMessage(\"\");};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isLogin?\"Login\":\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"auth-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",ref:emailRef,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",ref:passwordRef,required:true})]}),!isLogin&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",ref:confirmPasswordRef,required:true})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isLogin?\"Login\":\"Sign Up\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"switch-button\",onClick:handleSwitchMode,children:isLogin?\"Switch to Signup\":\"Switch to Login\"})]})});};export default AuthPage;","map":{"version":3,"names":["React","useState","useRef","useAuth","useNavigate","loginUser","signUpUser","jsx","_jsx","jsxs","_jsxs","AuthPage","isLogin","setIsLogin","errorMessage","setErrorMessage","emailRef","passwordRef","confirmPasswordRef","authContext","navigate","validateForm","_confirmPasswordRef$c","email","current","value","password","confirmPassword","emailPattern","test","length","handleResponse","userData","token","userId","tokenExpiration","login","handleSubmit","event","preventDefault","error","handleSwitchMode","prevState","className","children","onSubmit","htmlFor","type","id","ref","required","onClick"],"sources":["/Users/rajshah/Desktop/Event-Booking-master/client/src/components/Auth/Auth.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport \"./Auth.css\";\nimport { useAuth } from \"../../context/auth-context\";\nimport { useNavigate } from \"react-router-dom\";\nimport { loginUser, signUpUser } from \"../../controller/authContoller/authController.js\";\n\nconst AuthPage = () => {\n  const [isLogin, setIsLogin] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const emailRef = useRef();\n  const passwordRef = useRef();\n  const confirmPasswordRef = useRef();\n\n  const authContext = useAuth();\n  const navigate = useNavigate();\n\n  const validateForm = () => {\n    const email = emailRef.current.value;\n    const password = passwordRef.current.value;\n    const confirmPassword = confirmPasswordRef.current?.value;\n\n    const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/;\n    if (!emailPattern.test(email)) {\n      return \"Please enter a valid email address.\";\n    }\n    if (password.length < 6) {\n      return \"Password should be at least 6 characters long.\";\n    }\n    if (!isLogin && password !== confirmPassword) {\n      return \"Passwords do not match.\";\n    }\n    return null;\n  };\n\n  const handleResponse = (userData) => {\n    if (isLogin) {\n      const { token, userId, tokenExpiration } = userData;\n      authContext.login(token, userId, tokenExpiration);\n      navigate(\"/events\");\n    } else {\n      setIsLogin(true);\n      setErrorMessage(\"User created! Please log in.\");\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    const error = validateForm();\n    if (error) {\n      setErrorMessage(error);\n      return;\n    }\n\n    const email = emailRef.current.value;\n    const password = passwordRef.current.value;\n\n    try {\n      const userData = isLogin\n        ? await loginUser(email, password)\n        : await signUpUser(email, password);\n      handleResponse(userData);\n    } catch (error) {\n      setErrorMessage(\"Something went wrong.\");\n    }\n  };\n\n  const handleSwitchMode = () => {\n    setIsLogin((prevState) => !prevState);\n    setErrorMessage(\"\");\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"auth-card\">\n        <h2>{isLogin ? \"Login\" : \"Sign Up\"}</h2>\n        <form className=\"auth-form\" onSubmit={handleSubmit}>\n          <div className=\"form-control\">\n            <label htmlFor=\"email\">E-mail</label>\n            <input type=\"email\" id=\"email\" ref={emailRef} required />\n          </div>\n\n          <div className=\"form-control\">\n            <label htmlFor=\"password\">Password</label>\n            <input type=\"password\" id=\"password\" ref={passwordRef} required />\n          </div>\n\n          {!isLogin && (\n            <div className=\"form-control\">\n              <label htmlFor=\"confirmPassword\">Confirm Password</label>\n              <input type=\"password\" id=\"confirmPassword\" ref={confirmPasswordRef} required />\n            </div>\n          )}\n\n          {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\n\n          <button type=\"submit\">{isLogin ? \"Login\" : \"Sign Up\"}</button>\n        </form>\n\n        <button className=\"switch-button\" onClick={handleSwitchMode}>\n          {isLogin ? \"Switch to Signup\" : \"Switch to Login\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default AuthPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}