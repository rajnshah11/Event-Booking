{"ast":null,"code":"import React,{useState,useRef}from\"react\";import{useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{login as loginAction}from\"../../store/authSlice\";import{loginUser,signUpUser}from\"../../controller/authContoller/authController.js\";import\"./Auth.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthPage=()=>{const[isLogin,setIsLogin]=useState(true);const[errorMessage,setErrorMessage]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const emailRef=useRef();const passwordRef=useRef();const confirmPasswordRef=useRef();const dispatch=useDispatch();const navigate=useNavigate();const validateForm=()=>{var _confirmPasswordRef$c;const email=emailRef.current.value;const password=passwordRef.current.value;const confirmPassword=(_confirmPasswordRef$c=confirmPasswordRef.current)===null||_confirmPasswordRef$c===void 0?void 0:_confirmPasswordRef$c.value;const emailPattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/;if(!emailPattern.test(email)){return\"Please enter a valid email address.\";}if(password.length<6){return\"Password should be at least 6 characters long.\";}if(!isLogin&&password!==confirmPassword){return\"Passwords do not match.\";}return null;};const handleResponse=userData=>{if(isLogin){const{token,userId}=userData;dispatch(loginAction({token,userId}));navigate(\"/events\");}else{setIsLogin(true);setErrorMessage(\"User created! Please log in.\");}};const handleSubmit=async event=>{event.preventDefault();setIsLoading(true);// Start loading\nconst error=validateForm();if(error){setErrorMessage(error);setIsLoading(false);return;}const email=emailRef.current.value;const password=passwordRef.current.value;try{const userData=isLogin?await loginUser(email,password):await signUpUser(email,password);handleResponse(userData);}catch(error){setErrorMessage(error.message||\"Something went wrong.\");console.error(\"Login/Signup error:\",error);}finally{setIsLoading(false);// End loading\n}};const handleSwitchMode=()=>{setIsLogin(prevState=>!prevState);setErrorMessage(\"\");};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isLogin?\"Login\":\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"auth-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",ref:emailRef,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",ref:passwordRef,required:true})]}),!isLogin&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",ref:confirmPasswordRef,required:true})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,children:isLoading?\"Processing...\":isLogin?\"Login\":\"Sign Up\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"switch-button\",onClick:handleSwitchMode,children:isLogin?\"Switch to Signup\":\"Switch to Login\"})]})});};export default AuthPage;","map":{"version":3,"names":["React","useState","useRef","useDispatch","useNavigate","login","loginAction","loginUser","signUpUser","jsx","_jsx","jsxs","_jsxs","AuthPage","isLogin","setIsLogin","errorMessage","setErrorMessage","isLoading","setIsLoading","emailRef","passwordRef","confirmPasswordRef","dispatch","navigate","validateForm","_confirmPasswordRef$c","email","current","value","password","confirmPassword","emailPattern","test","length","handleResponse","userData","token","userId","handleSubmit","event","preventDefault","error","message","console","handleSwitchMode","prevState","className","children","onSubmit","htmlFor","type","id","ref","required","disabled","onClick"],"sources":["/Users/rajshah/Desktop/Event-Booking/client/src/components/Auth/Auth.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { useDispatch } from \"react-redux\"; \nimport { useNavigate } from \"react-router-dom\";\nimport { login as loginAction } from \"../../store/authSlice\";\nimport { loginUser, signUpUser } from \"../../controller/authContoller/authController.js\";\nimport \"./Auth.css\";\n\nconst AuthPage = () => {\n    const [isLogin, setIsLogin] = useState(true);\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false);\n\n    const emailRef = useRef();\n    const passwordRef = useRef();\n    const confirmPasswordRef = useRef();\n\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n\n    const validateForm = () => {\n        const email = emailRef.current.value;\n        const password = passwordRef.current.value;\n        const confirmPassword = confirmPasswordRef.current?.value;\n\n        const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/;\n        if (!emailPattern.test(email)) {\n            return \"Please enter a valid email address.\";\n        }\n        if (password.length < 6) {\n            return \"Password should be at least 6 characters long.\";\n        }\n        if (!isLogin && password !== confirmPassword) {\n            return \"Passwords do not match.\";\n        }\n        return null;\n    };\n\n    const handleResponse = (userData) => {\n        if (isLogin) {\n            const { token, userId } = userData;\n            dispatch(loginAction({ token, userId }));\n            navigate(\"/events\");\n        } else {\n            setIsLogin(true);\n            setErrorMessage(\"User created! Please log in.\");\n        }\n    };\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setIsLoading(true);  // Start loading\n        const error = validateForm();\n        if (error) {\n            setErrorMessage(error);\n            setIsLoading(false);\n            return;\n        }\n\n        const email = emailRef.current.value;\n        const password = passwordRef.current.value;\n\n        try {\n            const userData = isLogin\n                ? await loginUser(email, password)\n                : await signUpUser(email, password);\n            handleResponse(userData);\n        } catch (error) {\n            setErrorMessage(error.message || \"Something went wrong.\");\n            console.error(\"Login/Signup error:\", error);\n        } finally {\n            setIsLoading(false);  // End loading\n        }\n    };\n\n    const handleSwitchMode = () => {\n        setIsLogin((prevState) => !prevState);\n        setErrorMessage(\"\");\n    };\n\n    return (\n        <div className=\"auth-container\">\n            <div className=\"auth-card\">\n                <h2>{isLogin ? \"Login\" : \"Sign Up\"}</h2>\n                <form className=\"auth-form\" onSubmit={handleSubmit}>\n                    <div className=\"form-control\">\n                        <label htmlFor=\"email\">E-mail</label>\n                        <input type=\"email\" id=\"email\" ref={emailRef} required />\n                    </div>\n\n                    <div className=\"form-control\">\n                        <label htmlFor=\"password\">Password</label>\n                        <input type=\"password\" id=\"password\" ref={passwordRef} required />\n                    </div>\n\n                    {!isLogin && (\n                        <div className=\"form-control\">\n                            <label htmlFor=\"confirmPassword\">Confirm Password</label>\n                            <input type=\"password\" id=\"confirmPassword\" ref={confirmPasswordRef} required />\n                        </div>\n                    )}\n\n                    {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\n\n                    <button type=\"submit\" disabled={isLoading}>\n                        {isLoading ? \"Processing...\" : isLogin ? \"Login\" : \"Sign Up\"}\n                    </button>\n                </form>\n\n                <button className=\"switch-button\" onClick={handleSwitchMode}>\n                    {isLogin ? \"Switch to Signup\" : \"Switch to Login\"}\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default AuthPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}